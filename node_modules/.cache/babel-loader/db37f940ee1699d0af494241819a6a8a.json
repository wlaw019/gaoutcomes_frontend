{"ast":null,"code":"var _jsxFileName = \"/Users/wincylaw/wlaw019.github.io/gaoutcomes_front/src/App.js\";\nimport React from 'react';\nimport Courses from './components/Courses.js';\nimport FormCourse from './components/FormCourse.js';\nimport Students from './components/Students.js';\nimport FormStudent from './components/FormStudent.js'; // ========================\n// URL for psql database\n// ========================\n\nlet baseUrl = '';\n\nif (process.env.NODE_ENV === 'development') {\n  baseUrl = 'http://localhost:3000';\n} else {\n  console.log('this is for heroku');\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleView = (view, data) => {\n      let pageTitle = \"\";\n      let formInputs = {\n        course: \"\",\n        cohort: \"\",\n        dategraduated: \"\",\n        id: null\n      };\n      let formInputsStudent = {\n        name: \"\",\n        course_id: \"\",\n        dateoffer: \"\",\n        id: null\n      };\n\n      switch (view) {\n        case \"home\":\n          pageTitle = \"Course Overview\";\n          break;\n\n        case \"addCourse\":\n          pageTitle = \"Add a new Course\";\n          break;\n\n        case \"editCourse\":\n          pageTitle = \"Edit Course\";\n          formInputs = {\n            course: data.course,\n            cohort: data.cohort,\n            dategraduated: new Date(data.dategraduated).toISOString().split('T')[0],\n            id: data.id\n          };\n          break;\n\n        case \"students\":\n          pageTitle = \"Class Overview\";\n          formInputsStudent = {\n            name: \"\",\n            course_id: data,\n            dateoffer: \"\",\n            id: \"\"\n          };\n          this.setState({\n            formInputsStudent: formInputsStudent\n          });\n          break;\n\n        case \"addStudent\":\n          pageTitle = \"Aa a new Student\"; // formInputsStudent = {\n          //   name: data.name,\n          //   course_id: data.course_id,\n          //   dateoffer: new Date(data.dateoffer).toISOString().split('T')[0],\n          //   id: data.id\n          // }\n\n          break;\n\n        case \"editStudent\":\n          pageTitle = \"Edit Student\";\n          formInputsStudent = {\n            name: data.name,\n            course_id: data.course_id,\n            dateoffer: data.dateoffer === null ? new Date().toISOString().split('T')[0] : new Date(data.dateoffer).toISOString().split('T')[0],\n            id: data.id\n          };\n          this.setState({\n            formInputsStudent: formInputsStudent\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        view: {\n          page: view,\n          pageTitle: pageTitle\n        },\n        formInputs: formInputs\n      });\n    };\n\n    this.handleCreate = createData => {\n      let finalUrl = \"\";\n\n      if (this.state.view.page === \"addCourse\") {\n        finalUrl = `${baseUrl}/courses`;\n      } else if (this.state.view.page === \"addStudent\") {\n        finalUrl = `${baseUrl}/students`;\n      }\n\n      fetch(finalUrl, {\n        body: JSON.stringify(createData),\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      }).then(createdCourse => {\n        if (this.state.view.page === \"addCourse\") {\n          this.handleView('home');\n          this.fetchCourses();\n        } else if (this.state.view.page === \"addStudent\") {\n          this.handleStudents(createData.course_id);\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.handleUpdate = updateData => {\n      let finalUrl = \"\";\n\n      if (this.state.view.page === \"editCourse\") {\n        finalUrl = `${baseUrl}/courses/${updateData.id}`;\n      } else if (this.state.view.page === \"editStudent\") {\n        finalUrl = `${baseUrl}/students/${updateData.id}`;\n      }\n\n      fetch(finalUrl, {\n        body: JSON.stringify(updateData),\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      }).then(updatedCourse => {\n        if (this.state.view.page === \"editCourse\") {\n          this.handleView('home');\n          this.fetchCourses();\n        } else if (this.state.view.page === \"editStudent\") {\n          this.handleStudents(updateData.course_id);\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.handleDelete = id => {\n      let finalUrl = \"\";\n\n      if (this.state.view.page === \"home\") {\n        finalUrl = `${baseUrl}/courses/${id}`;\n      } else if (this.state.view.page === \"students\") {\n        finalUrl = `${baseUrl}/students/${id}`;\n      }\n\n      fetch(finalUrl, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      }).then(json => {\n        if (this.state.view.page === \"home\") {\n          this.setState({\n            courses: this.state.courses.filter(course => course.id !== id)\n          });\n        } else if (this.state.view.page === \"students\") {\n          this.handleStudents(this.state.formInputsStudent.course_id);\n        }\n      }).catch(err => console.log(err));\n    };\n\n    this.handleStudents = course_id => {\n      // fetch(`${baseUrl}/students`)\n      // .then(data=>data.json())\n      // .then(jData=> {\n      //   this.setState({\n      //     students:jData.filter(course => course.course_id === course_id)\n      //   })\n      // }).catch(err=>console.log(err))\n      // .then(() => {\n      //   this.handleView(\"students\", course_id)\n      // })\n      console.log(\"running\");\n      this.handleAllStudents(() => {\n        this.setState({\n          students: this.state.allStudents.filter(course => course.course_id === course_id)\n        }, () => {\n          this.handleView(\"students\", course_id);\n        });\n      });\n    };\n\n    this.handleAllStudents = () => {\n      fetch(`${baseUrl}/students`).then(data => data.json()).then(jData => {\n        this.setState({\n          allStudents: jData\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.fetchCourses = () => {\n      fetch(`${baseUrl}/courses`).then(data => data.json()).then(jData => {\n        this.setState({\n          courses: jData\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.state = {\n      courses: [],\n      students: [],\n      allStudents: [],\n      view: {\n        page: \"home\",\n        pageTitle: \"Course Overview\"\n      },\n      formInputs: {\n        course: null,\n        cohort: null,\n        dategraduated: null,\n        id: null\n      },\n      formInputsStudent: {\n        name: null,\n        course_id: null,\n        dateoffer: null,\n        id: null\n      }\n    };\n  } // ========================\n  // Handlers\n  // ========================\n\n\n  componentDidMount() {\n    this.fetchCourses();\n    this.handleAllStudents();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"gaOutcomes\")), React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      onClick: () => {\n        this.handleView(\"home\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"Home\"), this.state.view.page === \"home\" ? React.createElement(\"h4\", {\n      onClick: () => {\n        this.handleView(\"addCourse\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Add Course\") : null, this.state.view.page === \"students\" ? React.createElement(\"h4\", {\n      onClick: () => {\n        this.handleView(\"addStudent\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Add Student\") : null, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \"Analytics\")), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, this.state.view.pageTitle), this.state.view.page === \"home\" ? React.createElement(Courses, {\n      handleView: this.handleView,\n      handleDelete: this.handleDelete,\n      courses: this.state.courses,\n      handleStudents: this.handleStudents,\n      allStudents: this.state.allStudents,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }) : null, this.state.view.page === \"addCourse\" || this.state.view.page === \"editCourse\" ? React.createElement(FormCourse, {\n      handleCreate: this.handleCreate,\n      handleUpdate: this.handleUpdate,\n      view: this.state.view,\n      formInputs: this.state.formInputs,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }) : null, this.state.view.page === \"students\" ? React.createElement(Students, {\n      students: this.state.students,\n      handleView: this.handleView,\n      handleDelete: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }) : null, this.state.view.page === \"addStudent\" || this.state.view.page === \"editStudent\" ? React.createElement(FormStudent, {\n      handleCreate: this.handleCreate,\n      handleUpdate: this.handleUpdate,\n      view: this.state.view,\n      formInputsStudent: this.state.formInputsStudent,\n      students: this.state.students,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/wincylaw/wlaw019.github.io/gaoutcomes_front/src/App.js"],"names":["React","Courses","FormCourse","Students","FormStudent","baseUrl","process","env","NODE_ENV","console","log","App","Component","constructor","props","handleView","view","data","pageTitle","formInputs","course","cohort","dategraduated","id","formInputsStudent","name","course_id","dateoffer","Date","toISOString","split","setState","page","handleCreate","createData","finalUrl","state","fetch","body","JSON","stringify","method","headers","then","createdCourse","fetchCourses","handleStudents","catch","err","handleUpdate","updateData","updatedCourse","handleDelete","json","courses","filter","handleAllStudents","students","allStudents","jData","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Courses from './components/Courses.js'\nimport FormCourse from './components/FormCourse.js'\nimport Students from './components/Students.js'\nimport FormStudent from './components/FormStudent.js'\n\n// ========================\n// URL for psql database\n// ========================\nlet baseUrl = '';\nif (process.env.NODE_ENV === 'development') {\n  baseUrl = 'http://localhost:3000'\n} else {\n  console.log('this is for heroku');\n}\n\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      courses: [],\n      students: [],\n      allStudents:[],\n      view:{\n        page: \"home\",\n        pageTitle: \"Course Overview\"\n      },\n      formInputs:{\n        course: null,\n        cohort: null,\n        dategraduated: null,\n        id: null\n      },\n      formInputsStudent:{\n        name: null,\n        course_id: null,\n        dateoffer: null,\n        id: null\n      }\n    }\n  }\n\n// ========================\n// Handlers\n// ========================\n  handleView = (view, data) => {\n    let pageTitle = \"\";\n\n    let formInputs = {\n      course: \"\",\n      cohort: \"\",\n      dategraduated: \"\",\n      id: null\n    }\n\n    let formInputsStudent = {\n      name: \"\",\n      course_id: \"\",\n      dateoffer: \"\",\n      id: null\n    }\n\n    switch(view){\n      case \"home\":\n        pageTitle = \"Course Overview\"\n        break\n      case \"addCourse\":\n        pageTitle = \"Add a new Course\"\n        break\n      case \"editCourse\":\n        pageTitle = \"Edit Course\"\n        formInputs = {\n          course: data.course,\n          cohort: data.cohort,\n          dategraduated: new Date(data.dategraduated).toISOString().split('T')[0],\n          id: data.id\n        }\n        break\n      case \"students\":\n        pageTitle = \"Class Overview\"\n        formInputsStudent = {\n          name: \"\",\n          course_id: data,\n          dateoffer: \"\",\n          id: \"\"\n        }\n\n        this.setState({\n          formInputsStudent: formInputsStudent\n        })\n        break\n      case \"addStudent\":\n        pageTitle = \"Aa a new Student\"\n        // formInputsStudent = {\n        //   name: data.name,\n        //   course_id: data.course_id,\n        //   dateoffer: new Date(data.dateoffer).toISOString().split('T')[0],\n        //   id: data.id\n        // }\n        break\n      case \"editStudent\":\n        pageTitle = \"Edit Student\"\n        formInputsStudent = {\n          name: data.name,\n          course_id: data.course_id,\n          dateoffer: data.dateoffer===null? new Date().toISOString().split('T')[0] :new Date(data.dateoffer).toISOString().split('T')[0],\n          id: data.id\n          }\n\n        this.setState({\n          formInputsStudent: formInputsStudent\n        })\n        break\n      default:\n        break\n    }\n\n    this.setState({\n      view: {page: view, pageTitle: pageTitle},\n      formInputs: formInputs\n    })\n  }\n\n\n  handleCreate = (createData) => {\n    let finalUrl = \"\";\n\n    if (this.state.view.page===\"addCourse\") {\n      finalUrl = `${baseUrl}/courses`;\n    } else if (this.state.view.page===\"addStudent\") {\n      finalUrl = `${baseUrl}/students`;\n    }\n\n    fetch(finalUrl, {\n      body: JSON.stringify(createData),\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(createdCourse => {\n\n      if (this.state.view.page===\"addCourse\") {\n        this.handleView('home');\n        this.fetchCourses();\n      } else if (this.state.view.page===\"addStudent\") {\n        this.handleStudents(createData.course_id);\n      }\n\n      }).catch(err => console.log(err))\n  }\n\n\n  handleUpdate = (updateData) => {\n    let finalUrl = \"\";\n\n    if (this.state.view.page===\"editCourse\") {\n      finalUrl = `${baseUrl}/courses/${updateData.id}`;\n    } else if (this.state.view.page===\"editStudent\") {\n      finalUrl = `${baseUrl}/students/${updateData.id}`;\n    }\n\n    fetch(finalUrl, {\n      body: JSON.stringify(updateData),\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(updatedCourse => {\n\n      if (this.state.view.page===\"editCourse\") {\n        this.handleView('home');\n        this.fetchCourses();\n      } else if (this.state.view.page===\"editStudent\") {\n        this.handleStudents(updateData.course_id);\n      }\n\n      }).catch(err => console.log(err))\n  }\n\n\n  handleDelete = (id) => {\n    let finalUrl = \"\";\n\n    if (this.state.view.page===\"home\") {\n      finalUrl = `${baseUrl}/courses/${id}`;\n    } else if (this.state.view.page===\"students\") {\n      finalUrl = `${baseUrl}/students/${id}`;\n    }\n\n    fetch(finalUrl, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(json => {\n\n      if (this.state.view.page===\"home\") {\n        this.setState({\n          courses: this.state.courses.filter(course => course.id !== id)\n        })\n      } else if (this.state.view.page===\"students\") {\n        this.handleStudents(this.state.formInputsStudent.course_id);\n      }\n\n      }).catch(err => console.log(err))\n  }\n\n\n  handleStudents = (course_id) => {\n\n    // fetch(`${baseUrl}/students`)\n    // .then(data=>data.json())\n    // .then(jData=> {\n    //   this.setState({\n    //     students:jData.filter(course => course.course_id === course_id)\n    //   })\n    // }).catch(err=>console.log(err))\n    // .then(() => {\n    //   this.handleView(\"students\", course_id)\n    // })\nconsole.log(\"running\");\n\n    this.handleAllStudents(() => {\n      this.setState({\n        students:this.state.allStudents.filter(course => course.course_id === course_id)\n      },() => {\n        this.handleView(\"students\", course_id)\n      })\n    })\n\n\n  }\n\n\n  handleAllStudents = () => {\n\n    fetch(`${baseUrl}/students`)\n    .then(data=>data.json())\n    .then(jData=> {\n      this.setState({\n        allStudents:jData\n      })\n    }).catch(err=>console.log(err))\n  }\n\n// ========================\n// Run fetchCourses after page loads\n// ========================\n    fetchCourses = () => {\n      fetch(`${baseUrl}/courses`)\n      .then(data=>data.json())\n      .then(jData=> {\n        this.setState({courses:jData})\n      }).catch(err=>console.log(err))\n    }\n\n\n    componentDidMount(){\n      this.fetchCourses()\n      this.handleAllStudents()\n    }\n\n\n  render(){\n    return(\n      <div className=\"container\">\n        <header>\n          <h1>gaOutcomes</h1>\n\n        </header>\n        <nav>\n          <h4 onClick={() => {this.handleView(\"home\")}}>Home</h4>\n          {this.state.view.page === \"home\"?\n          <h4 onClick={() => {this.handleView(\"addCourse\")}}>Add Course</h4> : null}\n          {this.state.view.page === \"students\"?\n          <h4 onClick={() => {this.handleView(\"addStudent\")}}>Add Student</h4> : null}\n          <h4>Analytics</h4>\n        </nav>\n\n        <h2>{this.state.view.pageTitle}</h2>\n        {this.state.view.page === \"home\"?\n        <Courses handleView={this.handleView} handleDelete={this.handleDelete} courses={this.state.courses} handleStudents={this.handleStudents} allStudents={this.state.allStudents} /> : null}\n\n        {this.state.view.page === \"addCourse\"||this.state.view.page === \"editCourse\"?\n        <FormCourse handleCreate={this.handleCreate} handleUpdate={this.handleUpdate} view={this.state.view} formInputs={this.state.formInputs} />\n        : null}\n\n        {this.state.view.page === \"students\"?\n        <Students students={this.state.students} handleView={this.handleView} handleDelete={this.handleDelete} /> : null}\n\n        {this.state.view.page === \"addStudent\"||this.state.view.page === \"editStudent\"?\n        <FormStudent handleCreate={this.handleCreate} handleUpdate={this.handleUpdate} view={this.state.view} formInputsStudent={this.state.formInputsStudent} students={this.state.students} />\n        : null}\n\n\n\n\n      </div>\n    )\n  }\n\n\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}